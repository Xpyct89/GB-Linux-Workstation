Задачи:

1. Управление пользователями:
a) создать нового пользователя;
b) убедиться, что информация о нем появилась в соответствующих файлах в системе;
c) удалить созданного пользователя;

2. Управление группами:
a) создать группу;
b) попрактиковаться в смене групп у пользователей;
c) добавить пользователя в группу, не меняя основной;
d) удалить пользователя из группы.

3. Создать пользователя с правами суперпользователя. Проверить результат.
4. * Используя дополнительные материалы, выдать одному из созданных пользователей право на выполнение ряда команд, требующих прав суперпользователя (команды выбираем на своё усмотрение).

# Создаю пользователя
sudo adduser testuser

# Смотрю папки пользователей в корневой директории
ls /home/

# Проверяю список пользователей
more /etc/passwd

# Проверяю список групп
more /etc/group

# Проверяю список паролей
sudo more /etc/shadow

# Удаляю пользователя
sudo userdel -fr testuser

# Смотрю папки пользователей в корневой директории
ls /home/

# Проверяю список пользователей
more /etc/passwd

# Проверяю список групп
more /etc/group

# Проверяю список паролей
sudo more /etc/shadow

# Создаю группу
sudo addgroup testgroup

# Создаю пользователя для практики в смене групп
sudo adduser testuser2

# Практикуюсь в смене групп у пользователей не меняя основной
sudo usermod -aG testgroup testuser2

# Проверяю группы у пользователя
groups testuser2

# Оставляю пользователя только в одной группе
sudo usermod -g testgroup testuser2

# Проверяю группы у пользователя
groups testuser2

# Добавляю не основную группу
sudo usermod -aG testuser2 testuser2

# Проверяю группы у пользователя
groups testuser2

# Удаляю пользователя из группы
sudo deluser testuser2 testuser2

# Проверяю группы у пользователя
groups testuser2

# Создаю пользователя с правами root
sudo useradd -m -d /home/testroot -g sudo -s /bin/bash testroot

# Задаю ему пароль
sudo passwd testroot

# Проверяю группы у данного пользователя
groups testroot

# Логинюсь под ним
su testroot

# Запрашиваю команду для проверки, которая требует root прав
sudo apt update

# Разлогиниваюсь от пользователя testroot
exit

# Редактирую файл sudoers для выдачи ряда прав суперпользователя, не добавляя в группу root
sudo visudo /etc/sudoers

# В данный файл добавляю строку (см скрин)
testuser2 ALL=(ALL) NOPASSWD: /usr/bin/apt update, /usr/bin/apt upgrade

# Логинюсь для проверки
su testuser2

# Проверяю, что пользователь не состоит в группе sudo
groups testuser2

# Запрашиваем 2 разрешенные команды
sudo apt update
sudo apt upgrade